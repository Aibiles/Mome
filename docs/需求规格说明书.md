# 全景智行智能车载辅助系统 - 需求规格说明书

**文档版本**: v1.0  
**创建日期**: 2025年7月  
**更新日期**: 2025年7月  
**作者**: 宝宝巴士  

---

## 目录

1. [项目概述](#1-项目概述)
2. [系统目标](#2-系统目标)
3. [功能需求](#3-功能需求)
4. [非功能需求](#4-非功能需求)
5. [系统架构](#5-系统架构)
6. [接口需求](#6-接口需求)
7. [数据需求](#7-数据需求)
8. [约束条件](#8-约束条件)
9. [验收标准](#9-验收标准)

---

## 1. 项目概述

### 1.1 项目背景

随着智能驾驶技术的快速发展，车载辅助系统已成为提升驾驶安全性和便利性的重要工具。全景智行智能车载辅助系统旨在为驾驶员提供全方位的视觉辅助、智能感知和实时反馈功能。

### 1.2 项目目标

开发一款基于Android平台的智能车载辅助系统，集成多摄像头管理、传感器数据处理、AI视觉识别等功能，为用户提供安全、智能、便捷的驾驶体验。

### 1.3 目标用户

- 私家车主
- 商用车驾驶员
- 驾驶培训机构
- 车载设备制造商

---

## 2. 系统目标

### 2.1 业务目标

- 提供360度全景视觉辅助
- 实现智能驾驶行为分析
- 降低交通事故风险
- 提升驾驶体验和便利性

### 2.2 技术目标

- 支持多摄像头并发处理
- 实现实时传感器数据融合
- 提供高性能AI推理能力
- 确保系统稳定性和可靠性

---

## 3. 功能需求

### 3.1 核心功能模块

#### 3.1.1 摄像头管理系统 (F001)

**功能描述**: 管理和显示多个摄像头的视频流

**详细需求**:
- **F001-01**: 支持前、后、左、右四个方向的摄像头
- **F001-02**: 提供360度全景拼接显示
- **F001-03**: 支持摄像头热插拔检测
- **F001-04**: 提供摄像头状态监控和故障提示
- **F001-05**: 提供全屏模式

**优先级**: 高  
**前置条件**: 设备支持网络连接  
**输入**: 网络摄像头信号  
**输出**: 实时视频流显示

#### 3.1.2 智能方向预测系统 (F002)

**功能描述**: 基于传感器数据智能预测行驶方向

**详细需求**:
- **F002-01**: 提供前进、左转、右转辅助线
- **F002-02**: 提供倒车透视梯形辅助线
- **F002-03**: 根据陀螺仪数据动态调整辅助线角度
- **F002-04**: 根据加速度数据改变辅助线颜色

**优先级**: 高  
**前置条件**: 设备支持陀螺仪和加速度传感器  
**输入**: 传感器数据、用户操作  
**输出**: 动态辅助线图形

#### 3.1.3 实时仪表盘系统 (F003)

**功能描述**: 显示车辆状态和传感器数据

**详细需求**:
- **F003-01**: 基于加速度传感器计算并显示时速
- **F003-02**: 根据加速度消耗模拟电量显示
- **F003-03**: 显示当前时间和日期

**优先级**: 中  
**前置条件**: 传感器可用  
**输入**: 传感器数据、系统时间  
**输出**: 仪表盘UI显示

### 3.2 辅助功能模块

#### 3.2.1 人脸检测系统 (F004)

**功能描述**: 使用AI模型进行人脸检测和疲劳监测

**详细需求**:
- **F004-01**: 实时检测驾驶员面部
- **F004-02**: 疲劳状态检测和警告

**优先级**: 中  
**前置条件**: BlazeFace模型可用，前置摄像头正常  
**输入**: 摄像头图像数据  
**输出**: 检测结果、警告信息

#### 3.2.2 路况检测系统 (F005)

**功能描述**: 使用AI模型进行路况检测和车道线分割

**详细需求**:
- **F005-01**: 实时检测路况
- **F005-02**: 识别出多个车道

**优先级**: 中  
**前置条件**: Pelee模型可用，前置摄像头正常  
**输入**: 摄像头图像数据  
**输出**: 检测结果

#### 3.2.3 应用管理系统 (F006)

**功能描述**: 管理和启动其他应用程序

**详细需求**:
- **F006-01**: 显示已安装应用列表
- **F006-02**: 支持应用快速启动
- **F006-03**: 副屏应用启动功能

**优先级**: 低  
**前置条件**: Android系统正常运行  
**输入**: 用户选择操作  
**输出**: 应用启动结果

---

## 4. 非功能需求

### 4.1 性能需求

#### 4.1.1 响应时间
- 摄像头画面延迟: ≤ 100ms
- 360度全景视图延迟: ≤ 1500ms
- 传感器数据更新: ≤ 50ms
- 辅助线绘制刷新: ≤ 16ms (60fps)
- AI模型推理时间: ≤ 200ms
- 用户操作响应: ≤ 200ms

#### 4.1.2 并发性能
- 同时支持4路摄像头并发处理
- 支持多传感器并发数据采集
- UI线程和后台处理线程分离

#### 4.1.3 资源使用
- 内存使用: ≤ 512MB
- CPU使用率: ≤ 80%
- 存储空间: ≤ 100MB

### 4.2 可靠性需求

#### 4.2.1 稳定性
- 系统连续运行24小时无崩溃
- 摄像头连接异常自动恢复
- 传感器数据异常处理机制

#### 4.2.2 容错性
- 单个摄像头故障不影响其他功能
- 传感器失效时提供备用方案
- 网络断连时本地功能正常

### 4.3 兼容性需求

#### 4.3.1 硬件兼容性
- 支持Android 7.0+ (API Level 24+)
- 支持ARM64、ARMv7、x86_64架构

#### 4.3.2 软件兼容性
- 兼容不同版本的Android系统
- 支持不同分辨率和屏幕尺寸
- 兼容不同的摄像头硬件规格

### 4.4 可用性需求

#### 4.5.1 用户界面
- 界面简洁直观，符合Android设计规范
- 驾驶者能在驾驶过程中轻松获取信息
- 关键操作提供触觉和声音反馈

---

## 5. 系统架构

### 5.1 总体架构

```
┌─────────────────────────────────────────────────────────────┐
│                    用户界面层 (UI Layer)                      │
├─────────────────────────────────────────────────────────────┤
│                    业务逻辑层 (Business Layer)                │
├─────────────────────────────────────────────────────────────┤
│                    数据访问层 (Data Layer)                    │
├─────────────────────────────────────────────────────────────┤
│                    硬件抽象层 (HAL)                          │
└─────────────────────────────────────────────────────────────┘
```

### 5.2 核心组件

#### 5.2.1 摄像头管理组件
- CameraConnectionManager: 摄像头连接管理
- MjpegView: MJPEG视频流显示
- ExternalCameraConfig: 摄像头配置管理

#### 5.2.2 传感器管理组件
- SensorEventListener: 传感器事件监听

#### 5.2.3 AI推理组件
- BlazeFaceNcnn: 人脸检测模型

#### 5.2.4 图形渲染组件
- AssistLineOverlay: 辅助线绘制
- VisualEffectProcessor: 视觉效果处理
- OpenCV: 图像处理

### 5.3 数据流架构

```
传感器数据 → 数据滤波 → 业务逻辑 → UI更新
     ↓
摄像头数据 → 图像处理 → AI推理 → 结果显示
     ↓
用户操作 → 事件处理 → 控制指令 → 硬件响应
```

---

## 6. 接口需求

### 6.1 硬件接口

#### 6.1.1 摄像头
- 支持USB摄像头 (USB Video Class)

#### 6.1.2 传感器
- Android Sensor Framework
- 陀螺仪传感器
- 加速度传感器
- 
### 6.2 软件接口

#### 6.2.1 操作系统
- Android API Level 24+
- JNI编程
- NDK开发

#### 6.2.2 第三方库
- OpenCV 4.x
- NCNN 20250503

---

## 7. 数据需求

### 7.1 数据类型

#### 7.1.1 实时数据
- 摄像头视频流 (H.264/MJPEG)
- 传感器数据 (浮点数组)

#### 7.1.2 配置数据
- AI模型文件 (.bin/.param格式)

---

## 8. 约束条件

### 8.1 技术约束

#### 8.1.1 平台约束
- 仅支持Android平台
- 最低API Level 24

#### 8.1.2 硬件约束
- 最低2GB RAM
- 支持陀螺仪和加速度传感器

#### 8.1.3 性能约束
- 实时性要求高，延迟需控制在合理范围内
---

## 文档控制

| 版本 | 日期 | 修改内容 | 作者 |
|------|------|----------|------|
| v1.0 | 2025-7 | 初始版本 | 宝宝巴士 |